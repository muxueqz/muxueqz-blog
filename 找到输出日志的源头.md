Date: 2024-04-17 18:34

Tags: server, systemd, journalctl, journald

Title: 找到输出日志的源头！
Summary: 找出在Linux里某段日志的来源

Slug: journalctl_with_unit

Category: 系统运维

在系统管理和故障排查中，日志是一项无可替代的工具。然而，有时候我们可能会遇到一种情况：日志中出现了大量重复的内容，但却不清楚它们是从何而来。这种情况下，要确定日志的源头就显得至关重要。在本文中，我们将探讨如何使用 journalctl 命令来解析日志并找到其输出的源头。

### 背景

在日志管理中，journalctl 是一个强大的工具，可以用来查询和管理 systemd 日志。然而，当日志中出现大量重复内容时，我们需要一种方法来追踪这些重复日志的来源，这就需要借助 journalctl 提供的一些技巧。

### 使用 -o with-unit 参数

journalctl 命令提供了许多选项，其中 `-o with-unit` 是我们在这里要重点关注的。通过使用这个参数，我们可以将日志条目和其对应的系统服务单元关联起来，从而找到产生日志的具体服务。


```
journalctl -o with-unit

```
运行以上命令后，会显示日志条目，并附带产生该条目的系统服务单元。这样一来，我们就可以清晰地看到哪个服务输出了特定的日志。

### 输出样例


```
Jan 16 09:54:33 foo.service[100]: Starting foo service
```
foo.service就是产生日志的service啦
